# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
NODE_ENV=development
PORT=3000

# ============================================================================
# SECURITY - ENCRYPTION
# ============================================================================
# AES-256-GCM encryption key for sensitive data (phone numbers, PII)
# CRITICAL: Generate using: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Must be 64 hexadecimal characters (32 bytes)
# DO NOT commit this to version control - use AWS Secrets Manager in production
ENCRYPTION_KEY=your-64-character-hex-encryption-key-here

# Optional: Encryption key creation timestamp (for key rotation tracking)
ENCRYPTION_KEY_CREATED_AT=2025-01-01T00:00:00Z

# Key rotation support (for zero-downtime key updates)
# ENCRYPTION_KEY_V1=old-key-for-decryption-only
# ENCRYPTION_KEY_V2=new-key-for-encryption-and-decryption

# AWS Secrets Manager configuration (for production key storage)
AWS_REGION=us-east-1
ENCRYPTION_KEY_SECRET_PREFIX=whatsapp-saas/encryption-key

# ============================================================================
# SECURITY - ADMIN ACCESS
# ============================================================================
# Admin API token for administrative endpoints
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
ADMIN_TOKEN=your-secure-admin-token-here

# ============================================================================
# META WHATSAPP CONFIGURATION
# ============================================================================
# Meta webhook verification token
META_VERIFY_TOKEN=your-meta-verify-token

# Meta app secret for webhook signature verification
META_APP_SECRET=your-meta-app-secret

# Default WhatsApp credentials (fallback for single-tenant)
WHATSAPP_PHONE_NUMBER_ID=123456789012345
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL=postgresql://postgres:password@localhost:5432/whatsapp_saas?schema=public

# Connection Pool Configuration
DB_CONNECTION_LIMIT=20
DB_POOL_TIMEOUT=20
DB_STATEMENT_CACHE_SIZE=100

# Query Configuration
DB_QUERY_TIMEOUT=10000
DB_SLOW_QUERY_THRESHOLD=1000

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# Redis connection URL
# Format: redis://[:password@]host:port[/db-number]
REDIS_URL=redis://localhost:6379

# Redis password (if required)
# REDIS_PASSWORD=your-redis-password

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Comma-separated list of allowed origins
# In production, specify exact domains (no wildcards)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Log level: error, warn, info, http, debug
LOG_LEVEL=info

# ============================================================================
# RATE LIMITING
# ============================================================================
# Disable rate limiting in development (optional)
# DISABLE_RATE_LIMIT=true

# Webhook rate limit (requests per window)
WEBHOOK_RATE_LIMIT=100

# Admin endpoints rate limit
ADMIN_RATE_LIMIT=20

# Rate limit window (milliseconds)
RATE_LIMIT_WINDOW_MS=900000

# ============================================================================
# MESSAGE QUEUE CONFIGURATION
# ============================================================================
QUEUE_CONCURRENCY=5
QUEUE_RETRY_ATTEMPTS=3

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================
CACHE_TTL_SECONDS=3600
SALON_CACHE_TTL_SECONDS=1800

# ============================================================================
# MONITORING
# ============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090

# ============================================================================
# OPENAI CONFIGURATION
# ============================================================================
# OpenAI API key
# WARNING: This is sensitive - use AWS Secrets Manager in production
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# ============================================================================
# SECURITY BEST PRACTICES
# ============================================================================
#
# 1. NEVER commit .env file to version control
# 2. Use strong, randomly generated secrets
# 3. Rotate keys regularly (every 6-12 months)
# 4. Use AWS Secrets Manager for production secrets
# 5. Limit access to environment variables
# 6. Use different credentials for each environment
# 7. Enable encryption at rest for sensitive data
# 8. Monitor for unauthorized access attempts
# 9. Implement least privilege access
# 10. Regular security audits
#
# ============================================================================
