# ============================================================================
# WhatsApp SaaS Starter - Environment Configuration
# ============================================================================
# Copy this file to .env and update with your values
# NEVER commit .env to version control

# ============================================================================
# Server Configuration
# ============================================================================
NODE_ENV=development
PORT=3000

# ============================================================================
# Secrets Management
# ============================================================================
# Set to 'true' to use AWS Secrets Manager (production)
# Set to 'false' to use environment variables (local development)
USE_AWS_SECRETS=false

# AWS Region for Secrets Manager
AWS_REGION=us-east-1

# ============================================================================
# Admin Security
# ============================================================================
# IMPORTANT: Change this in production!
# Generate secure token: openssl rand -base64 48
ADMIN_TOKEN=dev-admin-token-change-in-production

# ============================================================================
# Meta WhatsApp Configuration
# ============================================================================
# Get these from Meta Developer Portal
# https://developers.facebook.com/apps/

# Webhook verification token (you define this)
META_VERIFY_TOKEN=your-custom-verify-token

# App secret from Meta dashboard
META_APP_SECRET=your-meta-app-secret

# ============================================================================
# Default WhatsApp Credentials
# ============================================================================
# Phone number ID from Meta WhatsApp Business API
WHATSAPP_PHONE_NUMBER_ID=123456789012345

# Access token from Meta dashboard
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token

# ============================================================================
# Database Configuration
# ============================================================================
# REQUIRED: Set a strong password for PostgreSQL
# Generate secure password: openssl rand -base64 32
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-strong-postgres-password
POSTGRES_DB=whatsapp_saas

# For Docker: postgresql://postgres:your-password@postgres:5432/whatsapp_saas?schema=public
# For local: postgresql://postgres:your-password@localhost:5432/whatsapp_saas?schema=public
# For AWS RDS: Get from AWS Secrets Manager or Terraform outputs
DATABASE_URL=postgresql://postgres:your-strong-postgres-password@localhost:5432/whatsapp_saas?schema=public

# Connection Pool Configuration
DB_CONNECTION_LIMIT=20
DB_POOL_TIMEOUT=20
DB_STATEMENT_CACHE_SIZE=100

# Query Configuration
DB_QUERY_TIMEOUT=10000
DB_SLOW_QUERY_THRESHOLD=1000

# ============================================================================
# Redis Configuration
# ============================================================================
# For Docker: redis://redis:6379
# For local: redis://localhost:6379
# For AWS ElastiCache: Get from Terraform outputs
REDIS_URL=redis://localhost:6379

# ============================================================================
# CORS Configuration
# ============================================================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=info

# ============================================================================
# Rate Limiting
# ============================================================================
# Requests per window
WEBHOOK_RATE_LIMIT=100
ADMIN_RATE_LIMIT=20

# Window size in milliseconds (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# ============================================================================
# Message Queue Configuration
# ============================================================================
QUEUE_CONCURRENCY=5
QUEUE_RETRY_ATTEMPTS=3

# ============================================================================
# Cache Configuration
# ============================================================================
# TTL in seconds
CACHE_TTL_SECONDS=3600
SALON_CACHE_TTL_SECONDS=1800

# AI Cache System Configuration
# Enable/disable AI response caching
AI_CACHE_ENABLED=true

# AI cache TTL in seconds (24 hours default)
AI_CACHE_TTL_SECONDS=86400

# Minimum confidence score to cache AI responses (0.0 - 1.0)
AI_CACHE_MIN_CONFIDENCE=0.7

# Enable cache warmup on startup
AI_CACHE_ENABLE_WARMUP=false

# Enable automatic cache maintenance
AI_CACHE_ENABLE_MAINTENANCE=true

# Enable analytics tracking
AI_CACHE_ENABLE_ANALYTICS=true

# Enable graceful degradation when cache fails
AI_CACHE_ENABLE_GRACEFUL_DEGRADATION=true

# ============================================================================
# Monitoring
# ============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090

# ============================================================================
# OpenAI Configuration
# ============================================================================
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Model to use (gpt-4, gpt-3.5-turbo, etc.)
OPENAI_MODEL=gpt-4

# Maximum tokens per request
OPENAI_MAX_TOKENS=1000

# Temperature (0.0 - 2.0, lower is more deterministic)
OPENAI_TEMPERATURE=0.7

# ============================================================================
# Notes
# ============================================================================
#
# Local Development:
# - Copy this file to .env
# - Update values as needed
# - Run: docker-compose up -d
#
# AWS Production:
# - Set USE_AWS_SECRETS=true
# - Configure AWS credentials
# - Secrets are fetched from AWS Secrets Manager
# - See SECRETS_MANAGEMENT.md for details
#
# Terraform Outputs:
# - After running terraform apply, update DATABASE_URL and REDIS_URL
# - Or configure application to fetch from Secrets Manager
#
# Security:
# - Never commit .env to version control
# - Rotate secrets regularly (every 90 days recommended)
# - Use strong, randomly generated tokens
# - See scripts/rotate-admin-token.sh for rotation
#
